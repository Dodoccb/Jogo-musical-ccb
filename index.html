<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Teoria Musical Divertida</title>
  <style>
    body {
      font-family: 'Comic Sans MS', cursive;
      background: #f7faff;
      margin: 0;
      padding: 0;
    }
    header {
      background: #ffcc00;
      color: #000;
      text-align: center;
      padding: 1rem;
      font-size: 1.5rem;
    }
    nav {
      background: #ffe680;
      padding: 1rem;
      display: flex;
      justify-content: center;
      gap: 1rem;
      flex-wrap: wrap;
    }
    nav button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      background: #fff;
      border: 2px solid #999;
      cursor: pointer;
      border-radius: 8px;
    }
    .play-button {
      background: #ff3b3b;
      color: white;
      font-weight: bold;
      font-size: 1.2rem;
      border-radius: 10px;
      border: none;
      padding: 0.7rem 1.5rem;
      animation: pulse 1.5s infinite;
    }
    .ranking-button {
      background: #2979ff;
      color: white;
      font-weight: bold;
      font-size: 1.1rem;
      border-radius: 10px;
      border: none;
      padding: 0.7rem 1rem;
    }
    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.1); }
      100% { transform: scale(1); }
    }
    section {
      padding: 2rem;
      display: none;
    }
    section.active {
      display: block;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      background: #fff;
    }
    th, td {
      border: 1px solid #ccc;
      padding: 0.75rem;
      text-align: center;
      font-size: 1.2rem;
    }
    th {
      background: #e0e0e0;
    }
    .map-container {
      background: url('mapa-jogo.png') no-repeat center top;
      background-size: contain;
      width: 100%;
      height: 720px;
      position: relative;
    }
    .fase {
      position: absolute;
      display: flex;
      flex-direction: column;
      align-items: center;
      font-size: 1.5rem;
    }
    .fase button {
      background: #fff;
      border: 2px solid #444;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.3rem;
      cursor: pointer;
    }
    .fase .cadeado {
      font-size: 1rem;
      margin-top: 5px;
      color: #888;
    }
    .apelido-box {
      text-align: center;
      margin-top: 1rem;
    }
    .apelido-box input {
      padding: 0.5rem;
      font-size: 1rem;
      border-radius: 6px;
      border: 1px solid #888;
    }
    .apelido-box button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
      margin-left: 1rem;
    }

    @media (max-width: 600px) {
      nav {
        flex-direction: column;
        align-items: center;
      }
      nav button {
        width: 90%;
        max-width: 300px;
        font-size: 1rem;
      }
      .map-container {
        height: auto;
        aspect-ratio: 9 / 16;
        background-size: cover;
      }
      .fase {
        font-size: 1.2rem;
      }
      .fase button {
        width: 42px;
        height: 42px;
        font-size: 1.1rem;
      }
      .fase .cadeado {
        font-size: 0.85rem;
      }
      section {
        padding: 1rem;
      }
      th, td {
        font-size: 1rem;
        padding: 0.5rem;
      }
    }
  </style>
</head>
<body>
<audio id="audioFundo" loop>
  <source src="hino001.mp3" type="audio/mpeg">
  Seu navegador nÃ£o suporta Ã¡udio.
</audio>

<header>ğŸµ Teoria Musical Divertida ğŸµ</header>

<nav>
  <button onclick="showSection('figuras')">Figuras Musicais</button>
  <button onclick="showSection('claves')">Claves Musicais</button>
  <button onclick="showSection('notas')">Notas Musicais</button>
  <button class="play-button" onclick="openGamePopup()">ğŸ® JOGAR</button>
  <button class="ranking-button" onclick="window.location.href='ranking.html'">ğŸ“Š RANKING</button>
</nav>

<div class="apelido-box">
  <label>Apelido: </label>
  <input type="text" id="apelido" placeholder="Digite seu apelido..." />
  <button id="salvarApelidoBtn" onclick="salvarApelido()">Salvar</button>
</div>

<section id="figuras" class="active">
  <h2>Figuras Musicais</h2>
  <p>A duraÃ§Ã£o do som, a duraÃ§Ã£o do silÃªncio e o ritmo musical sÃ£o escritos com figuras musicais.</p>
  <p><strong>Nota musical</strong> Ã© a figura que representa o som.<br>
  <strong>Pausa musical</strong> Ã© a figura que representa o silÃªncio.</p>
  <table>
    <thead>
      <tr>
        <th>Figura de Som</th>
        <th>Nome</th>
        <th>Figura de SilÃªncio</th>
        <th>Nome</th>
        <th>NÃºmero de EquivalÃªncia</th>
      </tr>
    </thead>
    <tbody>
      <tr><td style="font-size: 2rem;">ğ…</td><td>Semibreve</td><td style="font-size: 2rem;">â–‡</td><td>Pausa de Semibreve</td><td>1</td></tr>
      <tr><td style="font-size: 2rem;">ğ…</td><td>MÃ­nima</td><td style="font-size: 2rem;">â–‚</td><td>Pausa de MÃ­nima</td><td>2</td></tr>
      <tr><td style="font-size: 2rem;">ğ…Ÿ</td><td>SemÃ­nima</td><td style="font-size: 2rem;">ğ„½</td><td>Pausa de SemÃ­nima</td><td>4</td></tr>
      <tr><td style="font-size: 2rem;">ğ… </td><td>Colcheia</td><td style="font-size: 2rem;">ğ„¾</td><td>Pausa de Colcheia</td><td>8</td></tr>
      <tr><td style="font-size: 2rem;">ğ…¡</td><td>Semicolcheia</td><td style="font-size: 2rem;">ğ„¿</td><td>Pausa de Semicolcheia</td><td>16</td></tr>
      <tr><td style="font-size: 2rem;">ğ…¢</td><td>Fusa</td><td style="font-size: 2rem;">ğ…€</td><td>Pausa de Fusa</td><td>32</td></tr>
      <tr><td style="font-size: 2rem;">ğ…£</td><td>Semifusa</td><td style="font-size: 2rem;">ğ…</td><td>Pausa de Semifusa</td><td>64</td></tr>
    </tbody>
  </table>
</section>

<section id="claves">
  <h2>Claves Musicais</h2>
  <p>As claves ajudam a identificar as notas no pentagrama. A mais usada Ã© a Clave de Sol.</p>
  <img src="https://upload.wikimedia.org/wikipedia/commons/4/41/Gclef.svg" width="80" alt="Clave de Sol">
</section>

<section id="notas">
  <h2>Notas Musicais</h2>
  <ul>
    <li>DÃ³ â€“ dominÃ³ ğŸ²</li>
    <li>RÃ© â€“ rÃ©gua ğŸ“</li>
    <li>Mi â€“ gato "Miau" ğŸ±</li>
    <li>FÃ¡ â€“ faca ğŸ´</li>
    <li>Sol â€“ sol â˜€ï¸</li>
    <li>LÃ¡ â€“ laÃ§o ğŸ€</li>
    <li>Si â€“ sino ğŸ””</li>
  </ul>
</section>

<section id="jogo">
  <h2>ğŸ—ºï¸ Mapa do Jogo â€“ Fases do MÃ©todo MSA</h2>
  <div class="map-container">
    <div class="fase" style="top: 20%; left: 30%;">
      <button>ğŸµ</button><div class="cadeado">ğŸ”’</div>
    </div>
    <div class="fase" style="top: 63%; left: 40%;">
      <button>ğŸµ</button><div class="cadeado">ğŸ”’</div>
    </div>
    <div class="fase" style="top: 48%; left: 59%;">
      <button>ğŸµ</button><div class="cadeado">ğŸ”’</div>
    </div>
    <div class="fase" style="top: 34%; left: 45%;">
      <button>ğŸµ</button><div class="cadeado">ğŸ”’</div>
    </div>
    <div class="fase" style="top: 19%; left: 62%;">
      <button>ğŸµ</button><div class="cadeado">ğŸ”’</div>
    </div>
  </div>
</section>

<script>
  function showSection(id) {
    document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
    document.getElementById(id).classList.add('active');
  }

  function salvarApelido() {
    const nome = document.getElementById("apelido").value.trim();
    if (nome.length < 2) return alert("Digite um apelido vÃ¡lido.");
    localStorage.setItem("apelido", nome);
    document.getElementById("apelido").disabled = true;
    document.getElementById("salvarApelidoBtn").disabled = true;
  }

  function openGamePopup() {
    const audio = document.getElementById("audioFundo");
    if (audio && !audio.paused) audio.pause();

    let dados = JSON.parse(localStorage.getItem("jogador")) || {};
    let fase = dados.fase || 1;
    const popup = window.open(`fase${fase}.html`, "_blank", "width=600,height=600");

    const checkPopupClosed = setInterval(() => {
      if (popup.closed) {
        clearInterval(checkPopupClosed);
        audio.play();
      }
    }, 500);
  }

  window.addEventListener("DOMContentLoaded", () => {
    const audio = document.getElementById("audioFundo");
    document.querySelectorAll("button").forEach(btn => {
      btn.addEventListener("click", () => {
        if (audio && audio.paused) {
          audio.play().catch(e => console.log("Autoplay bloqueado:", e));
        }
      });
    });

    const apelido = localStorage.getItem("apelido");
    if (apelido) {
      document.getElementById("apelido").value = apelido;
      document.getElementById("apelido").disabled = true;
      document.getElementById("salvarApelidoBtn").disabled = true;
    }
  });
</script>
</body>
</html>
